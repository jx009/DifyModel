APP_NAME=DifyModel
APP_ENV=dev
HOST=127.0.0.1
PORT=8080
LOG_LEVEL=info
MAX_REQUEST_BYTES=2097152

# Security
API_AUTH_ENABLED=false
API_AUTH_TOKEN=
# JSON map string, example: {"tenant_a":"token-a","tenant_b":"token-b"}
API_AUTH_TENANT_TOKENS={}
API_STRICT_INPUT=false

# Rate Limit
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=120
RATE_LIMIT_TENANT_MAX_REQUESTS=300
RATE_LIMIT_KEY_STRATEGY=hybrid

# SSE
SSE_HEARTBEAT_MS=15000
SSE_CLIENT_TTL_MS=120000
SSE_MAX_CONNECTIONS=2000

# Exam routing
EXAM_IMAGE_ONLY_DEFAULT_SUBTYPE=figure_reasoning
EXAM_IMAGE_ONLY_CONFIDENCE=0.62
EXAM_SUBTYPE_CLASSIFIER_MODE=heuristic
# If true, re-run subtype classification on every retry pass (may increase cost/latency).
EXAM_RECLASSIFY_ON_RETRY=false

# Dify
DIFY_ENABLED=false
DIFY_BASE_URL=
DIFY_API_KEY=
# Optional JSON map: {"wf_xxx":"api-key-for-wf","wf_yyy":"api-key-for-wf-2"}
DIFY_API_KEYS_BY_WORKFLOW_ID={}
DIFY_TIMEOUT_MS=15000
DIFY_FALLBACK_TO_MOCK=true
DIFY_USER_PREFIX=difymodel
#
# Optional subtype classifier
DIFY_SUBTYPE_CLASSIFIER_API_KEY=
DIFY_SUBTYPE_TIMEOUT_MS=8000

# Storage
POSTGRES_URL=
REDIS_URL=
S3_ENDPOINT=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=

# Observability
ENABLE_METRICS=true
SENTRY_DSN=

# Knowledge governance (Phase 5)
KB_REGISTRY_RELOAD_INTERVAL_MS=10000
KB_MAPPING_RELOAD_INTERVAL_MS=10000
KB_ALLOW_INACTIVE=false
KB_REGISTRY_FAIL_FAST=false
KB_MAPPING_FAIL_FAST=false
KB_MAPPING_REQUIRE_ENABLED_SCENARIOS=true
RETRIEVAL_LOG_MAX_BYTES=20971520
